# Домашнее задание к занятию 17 «Инцидент-менеджмент»

## Задание

Составьте постмортем на основе реального сбоя системы GitHub в 2018 году.

Информацию о сбое можно изучить по ссылкам ниже:

* [краткое описание на русском языке](https://habr.com/ru/post/427301/);
* [развёрнутое описание на английском языке](https://github.blog/2018-10-30-oct21-post-incident-analysis/).

### Решение

|||
| ------------------------ | ---------------- |
| Краткое описание инцидента | 21 октября 2018 в 22:52 плановые работы по техническому обслуживанию по замене вышедшего из строя оптического оборудования 100G привели к потере соединения между нашим сетевым концентратором на восточном побережье США и нашим основным центром обработки данных на восточном побережье США. Соединение между этими точками было восстановлено за 43 секунды, но этот кратковременный сбой вызвал цепочку событий, которые привели к ухудшению качества обслуживания на 24 часа и 11 минут.|
| Причина инцидента | Потеря связи между сетевым центром и центром обработки данных произошла в результате плановых работ по техническому обслуживанию, в ходе которых было заменено неисправное оптическое оборудование 100G. |
| Воздействие | В течение 24 часов и 11 минут наблюдалось снижение качества обслуживания. |
| Обнаружение | 22:54 Внутренние системы мониторинга начали генерировать оповещения, указывающие на многочисленные сбои. <br>23:02 инженеры группы быстрого реагирования определили, что топологии многочисленных кластеров баз данных находятся в неожиданном состоянии. Запрос к топологии репликации базы данных показал только серверы из ЦОД на западном побережье США. |
| Реакция | 23:07 Группа реагирования решила вручную заблокировать внутренние инструменты развертывания, чтобы предотвратить внесение каких-либо дополнительных изменений. <br>23:09 Группа реагирования перевела сайт в желтый статус. <br>23:11 Был подключен координатор по инцидентам, который изменил решение на красный статус. |
| Восстановление | Пользовательские данные восстановлены из резервных копий БД Восточного побережья, а также путем реплицикации данных, записанных в БД Западного побережья. В процесс восстановления оперативно вносились коррективы исходя из изменения времени восстановления данных (в течении суток скорость репликации менялась исходя из пользовательской активности и нагрузки на функционирующие узлы). |
| Таймлайн: |21 октября 2018
<br> 22:54 Внутренние системы мониторинга начали генерировать оповещения, указывающие на многочисленные сбои.
<br> 23:02 инженеры группы быстрого реагирования определили, что топологии многочисленных кластеров баз данных находятся в неожиданном состоянии. Запрос к топологии репликации базы данных показал только серверы из ЦОД на западном побережье США.
<br> 23:07 Группа реагирования решила вручную заблокировать внутренние инструменты развертывания, чтобы предотвратить внесение каких-либо дополнительных изменений.
<br> 23:09 Группа реагирования перевела сайт в желтый статус.
<br> 23:11 Был подключен координатор по инцидентам, который изменил решение на красный статус.

22 октября 2018
00:05 Произведено информирование пользователей, о контролируемом переходе на другой ресурс внутренней системы хранения данных.
00:41 Начат процесс резервного копирования для всех затронутых кластеров MySQL
06:51 Восстановление нескольких кластеров БД из резервных копий в ЦОД на восточном побережье США и начало репликации новых данных с западного побережья.
07:46 Публикация в блоге GitHub информации о сбое БД
11:12 Все первичные базы данных снова установлены на восточном побережье США.
13:15 Ввод дополнительных реплик чтения MySQL в общедоступном облаке Восточного побережья США, для нормализации скорости восстановления, в связи с пиковой нагрузкой трафика на сайт.
16:24 Синхронизация реплик и переход на исходную топологию для решения проблемы с задержкой и доступностью
16:45 Балансировка возросшей нагрузки на сайт
23:03 Все задачи ожидающие сборки веб-перехватчиков и страниц были обработаны, а целостность и правильная работа всех систем подтверждены. Статус сайта обновился на зеленый. |
| Последующие действия | Улучшение уровня дублирования и надежности сетевой инфраструктуры.

Расширение возможностей мониторинга и системы оповещения.

Обновление сетевого оборудования.

Регулярное проведение аудитов для проверки актуальности и надежности инфраструктуры.

Предоставление пользователю информации о возникших инцидентах и принятых мерах для их устранения.

Повышение эффективности сценариев реагирования на сбои. |
